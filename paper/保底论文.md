# 节能的虚拟网络嵌入：基于图卷积网络的深度强化学习方法
## 摘要
网络虚拟化技术是未来网络架构的重要组成部分，为当前网络结构带来了更高的资源利用率、灵活性、安全性和管理简化等好处。该技术可以将多个虚拟网络请求（VNR）部署在同一个基底网络中，这个过程叫做虚拟网络嵌入（VNE）。将大量分散的VNR整合到少量的基底网络中可以减少网络运营成本和降低能源消耗。在能耗方面优化分配网络资源一直是一个挑战。然而，现有的节能VNE算法还存在一些不足。例如，采用启发式算法去寻找路由策略需要手动去设计静态的改进步骤；对于图结构的特征提取的效率；没有考虑流量的周期性波动。针对以上不足，本文使用流行的深度强化学习解决传统方法的低效问题；使用图卷积网络作为网络特征提取器去提取具有图结构信息的网络；将流量周期性的波动加入到网络特征当中，以此作为约束之一对虚拟网络请求做出具有预测性的嵌入。
## 引言
网络虚拟化技术是构建未来网络架构重要的技术之一，它旨在提高资源利用率、灵活性、安全性和管理简化。它使得网络能够更好地适应快速变化的需求和应用场景，提供高效、可靠和个性化的网络服务。在虚拟网络环境中，多个应用程序共享单个基底网络，每个基底网络相对独立于，每个应用程序的需求都以虚拟网络请求的形式呈现。优化VNR映射到基底网络的过程是网络虚拟化中资源分配的主要挑战，他被称之为虚拟网络嵌入问题。

现有的有关VNE的研究大多数侧重于资源供应上，为每个VNR的生命周期提供最大的资源需求。然而，这种资源分配方案会导致大量的CPU算力和链路带宽没有被充分的利用，导致大量的能源浪费和经济损失。例如，数据中心的服务器在大部分时间都是以最大负载的10%-50%运行着。而且，服务器完全空闲时，它所消耗的能量占最大负载时的70%。这促使着我们设计一个节能绿色的VNE方案。

目前节能的VNE算法还存在一些问题。由于VNE问题被证明是NP-hard的，因此在一个大的网络环境中不可能得到最优解。为了简化VNE问题，大量学者使用启发式方法去获得VNE中的次优解。然而，启发式解决方案通常遵循由专门的人手动设计静态的改进步骤，而且在大规模网络中的运行时间仍然过长。特征提取是VNE过程的重要步骤之一。随着网络流量数据维度与数据量持续增加，网络节点与链路之间关系变得越来越复杂。这导致传统的方法不适用于描述被检测的网络。例如：手动提取网络特征的效率很低，RL直接用于VNE的特征提取忽略了网络的空间特征。为了解决VN嵌入中的能源问题，有许多研究能够找到一种VNE解决方案，该解决方案消耗的能量最少。但是由于VNR的到来和离去是无法确定的。所以一段时间后，他们的解决方案可能会变得不那么节能。如图1所示，商业区的网络在周末时负载较高，办公区则相反。如果以最大需求提供网络资源，那么大量的能源会被浪费。


本文使用一种基于深度强化学习DRL技术的VNE算法，来解决上述算法的不足。在该方法中，深度学习DL被作为特征提取器。深度学习在许多领域取得了显著的成就，如计算机视觉[15]、自然语言处理[19]、语音识别等。它能够处理大规模数据和高维特征，并通过自动学习特征表示来提取数据中的信息。在强化学习RL中，智能体通过观察环境的状态，采取相应的动作，并根据环境给予的奖励或惩罚来不断调整策略，以最大化长期累积奖励。在描述网络的的时候，我们为每个VNR加上时间戳，为分析流量的周期波动提供基础。本文的主要贡献可概括如下：
- 我们将强化学习作为学习代理，并且引入了A3C算法来保证采样训练经验的效率和鲁棒性，同时优化学习代理。实验表明，使用了A3C算法的学习代理比其它算法收敛速度更快。
- 我们将基于GCN的强化学习（RL）算法最为VNE的特征提取器。特别是，我们构建的卷积网络的卷积核可以自动从底层网络中提取特征，为网络资源调度提供了重要基础。
- 我们为网络的状态加上了时间属性，并且模拟了网络的周期性波动。实验表明我们的算法可以感知网络流量的周期性波动，为预测网络负载程度提供了重要的依据。
本文的其余部分组织如下。第二部分介绍了有关节能的VNE算法。第三部分为VNE模型进行了建模，并给出了评价指标。第四节详细介绍了我们的节能的VNE算法。第五节介绍并分析了仿真实验和实验结果。最后，对全文进行了总结和展望。
## 相关工作
在本节中，我们首先介绍VNE相关研究，然后，我们编译了节能VNE领域最近的相关研究。
### 虚拟网络嵌入
VNE的早期研究集中在设计高效的算法，以最限度的提高基底资源的利用率。比较知名的是C等人提出的节点-链路两阶段协调算法ViNEYard-VN。改方法将VNE问题描述为线性程序，然后分别使用确定性和随机舍入技术设计两种在线VN嵌入算法D-ViNE和R-ViNE。
为了反映不同节点的相对重要性，使用了一种基于马尔可夫随机游动（RW）的模型，该模型根据网络节点的资源和拓扑特性对网络节点进行排序。在这个模型的基础上提出了两种VNE算法：1.基于节点重要性的两阶段嵌入。2.基于广度优先搜索的回溯VNE。大量实验表明，基于RW的算法对VNE的长期平均收入和接受率都有提高。针对单域虚拟嵌入技术在嵌入方面的开销巨大的问题，一种改进的粒子群算法被引入多域VNE中，实验表明该方案可以有效的提高资源利用率。随着人工智能的发展，许多机器学习（ML）算法被用来代替启发式算法解决VNE问题。针对长期影响带来的问题，一种基于层次强化学习的主动虚拟网络嵌入算法被提出，VNE任务由两级代理执行，该代理考虑VNR的长期影响和嵌入操作的短期影响。为了在可接受的时间内获得嵌入方案，VNE问题被描述为马尔可夫决策过程（MDP），并使用蒙特卡洛树搜索（MCTS）算法为提议的MDP设计行动策略（节点映射）。然而，MCTS需要为每个嵌入决策运行一个完整的过程，因此这使得算法很耗时。
### 节能的虚拟网络嵌入
为了应对不断上升的能源成本和对网络服务基础设施能耗的担忧，Botero等人首先将众所周知的虚拟网络嵌入问题（VNE）扩展到能源感知，并提出了混合整数规划（MIP）。这种方法通过关闭剩余的未使用接口和节点来停用它们，以最大限度地减少底层网络的总体网络消耗。由于VNE的NP-hard性质，该方法在大规模网络下不能很好地执行。因为无线传感器网络WSN传感器节点的可用能量有限，最大程度地降低总体能耗的VNE问题被描述为整数线性规划（ILP）。结合所谓的E2NE启发式方法，实现了高效率的VNE。但是该方案由于启发式方法的限制，无法应用于大规模网络。针对节能VNE缺乏对网络拓扑信息的考虑，应用基于场论的谱聚类提取网络特征。改方法以网络的拓扑信息为基础建立动态感兴趣区域（CROI），然后实时更新可映射区域，避免了局部最优问题。实验表明，收入和成本的平均比率以及请求接受率得到提高。为了缓解节省能耗带来的服务降级问题，两项迁移政策被映入VNE中。第一个被称为“全局”，通过对当天的流量上下文分析，然后在利用马尔可夫决策过程来获得嵌入方案。第二个称为“本地”，仅通过对当前流量的了解来获得方案。所取得的结果表明，应用全局政策比本地政策具有更好的性能。通过分析，我们发现该方法的状态空间和状态转移概率需要预先定义，对于复杂的网络状态空间，这可能需要大量的计算资源和数据。
## 网络模型和问题陈述
在本节中，我们会详细介绍虚拟网络于基底网络的模型，然后简要描述了问题和解决方案。
### 基底网络模型
我们可以将基底网络抽象为一个无向图G={N，L，C，B}。其中N={n1，n2...n3}为节点集合，由基底节点组成，为虚拟网络请求提供基底节点资源（如CPU 资源等），L={}为链路集合，由基底链路组成，满足虚拟网络请求的物理链路资源（如带宽等）。C表示基底节点的CPU资源集合。B表示基底服务器的链路资源（如带宽资源等）。

相似的，VNR可以描述为G={N，L，C，B}。其中t表示再一个时间周期的偏移量，这为后面描述网络流量的周期性波动提供了重要基础。N表示所有虚拟节点的集合，l表示所有虚拟链路的集合。c和b分别表示虚拟节点和虚拟链路的资源约束集合，其中c={}表示虚拟节点约束属性（如CPU容量等），b={}表示虚拟链路约束属性（如链路带宽等）。
